<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>YT Music â€“ Home</title>
<link rel="stylesheet" href="assets/common.css">
</head>
<body>

<header>YT Music</header>

<div id="feed" class="feed"></div>

<nav>
  <a href="index.html">ğŸ  Home</a>
  <a href="search.html">ğŸ” Search</a>
</nav>

<script>
const API_KEY = "AIzaSyDegWP6p4oz6QHaKe55UHE50KGbviyycfU";
let pageToken = "";
const feed = document.getElementById("feed");

function loadHome(){
  fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet&chart=mostPopular&regionCode=IN&videoCategoryId=10&maxResults=12&pageToken=${pageToken}&key=${API_KEY}`)
  .then(r=>r.json()).then(d=>{
    pageToken = d.nextPageToken || "";
    d.items.forEach(v=>{
      const c=document.createElement("div");
      c.className="card";
      c.innerHTML = `
        <img src="${v.snippet.thumbnails.medium.url}">
        <span>${v.snippet.title}</span>`;
      c.onclick = ()=> location.href = `player.html?id=${v.id}`;
      feed.appendChild(c);
    });
  });
}

window.onscroll = ()=>{
  if(innerHeight + scrollY > document.body.offsetHeight - 200){
    loadHome();
  }
};

loadHome();
</script>
</body>
</html>
